{"ast":null,"code":"var _jsxFileName = \"D:\\\\Traitors\\\\client\\\\src\\\\components\\\\ChatSystem.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatSystem({\n  gameState,\n  playerRole,\n  canChat,\n  chatRoom,\n  activeRoom,\n  activePrivateChat,\n  privateMessages,\n  availableRooms,\n  newRoomName,\n  setNewRoomName,\n  onSendMessage,\n  onSendRoomMessage,\n  onSendPrivateMessage,\n  onCreateRoom,\n  onJoinRoom,\n  onStartPrivateChat,\n  socket,\n  setActiveRoom,\n  setActivePrivateChat\n}) {\n  _s();\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingUsers, setTypingUsers] = useState(new Set());\n  const [localChatRoomMessages, setLocalChatRoomMessages] = useState({});\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n  const [showChatMenu, setShowChatMenu] = useState(false);\n\n  // Merge gameState.chatRoomMessages into local state on update\n  useEffect(() => {\n    setLocalChatRoomMessages(gameState.chatRoomMessages || {});\n  }, [gameState.chatRoomMessages]);\n\n  // Listen for new room messages and update local state\n  useEffect(() => {\n    const handleRoomMessage = msg => {\n      setLocalChatRoomMessages(prev => {\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\n        arr.push(msg);\n        return {\n          ...prev,\n          [msg.roomId]: arr\n        };\n      });\n    };\n    socket.on('roomMessage', handleRoomMessage);\n    return () => socket.off('roomMessage', handleRoomMessage);\n  }, [socket]);\n\n  // Listen for main chat messages (traitor/faithful main chat)\n  useEffect(() => {\n    const handleMessage = msg => {\n      setLocalChatRoomMessages(prev => {\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\n        arr.push(msg);\n        return {\n          ...prev,\n          [msg.roomId]: arr\n        };\n      });\n    };\n    socket.on('message', handleMessage);\n    return () => socket.off('message', handleMessage);\n  }, [socket]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [gameState.chatRoomMessages, privateMessages]);\n\n  // Typing indicator logic\n  useEffect(() => {\n    if (message && !isTyping) {\n      setIsTyping(true);\n      socket.emit('typing', {\n        isTyping: true,\n        roomId: activeRoom || chatRoom\n      });\n    } else if (!message && isTyping) {\n      setIsTyping(false);\n      socket.emit('typing', {\n        isTyping: false,\n        roomId: activeRoom || chatRoom\n      });\n    }\n\n    // Clear typing indicator after 3 seconds of no typing\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    if (message) {\n      typingTimeoutRef.current = setTimeout(() => {\n        setIsTyping(false);\n        socket.emit('typing', {\n          isTyping: false,\n          roomId: activeRoom || chatRoom\n        });\n      }, 3000);\n    }\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, [message, isTyping, socket, activeRoom, chatRoom]);\n\n  // Listen for typing events\n  useEffect(() => {\n    const handleTyping = ({\n      playerId,\n      playerName,\n      isTyping: userTyping\n    }) => {\n      if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) return;\n      setTypingUsers(prev => {\n        const newSet = new Set(prev);\n        if (userTyping) {\n          newSet.add(playerName);\n        } else {\n          newSet.delete(playerName);\n        }\n        return newSet;\n      });\n    };\n    socket.on('userTyping', handleTyping);\n    return () => socket.off('userTyping', handleTyping);\n  }, [socket]);\n  useEffect(() => {\n    // Listen for chatRoomInvited event\n    const handleChatRoomInvited = ({\n      roomId,\n      roomName\n    }) => {\n      alert(`You have been invited to join room: ${roomName}`);\n      onJoinRoom(roomId);\n    };\n    socket.on('chatRoomInvited', handleChatRoomInvited);\n    return () => socket.off('chatRoomInvited', handleChatRoomInvited);\n  }, [socket, onJoinRoom]);\n  const handleSendMessage = () => {\n    if (!message.trim()) return;\n    if (activeRoom) {\n      onSendRoomMessage();\n      setMessage('');\n    } else if (activePrivateChat) {\n      onSendPrivateMessage();\n      setMessage('');\n    } else if (canChat) {\n      onSendMessage(chatRoom, message);\n      setMessage('');\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const getCurrentChatTitle = () => {\n    if (activeRoom) {\n      const room = availableRooms.find(r => r.roomId === activeRoom);\n      return `Room: ${(room === null || room === void 0 ? void 0 : room.name) || 'Unknown'}`;\n    }\n    if (activePrivateChat) {\n      const player = gameState.players.find(p => p.id === activePrivateChat);\n      return `Private: ${(player === null || player === void 0 ? void 0 : player.name) || 'Unknown'}`;\n    }\n    if (canChat) {\n      return 'Group Discussion';\n    }\n    return 'Chat';\n  };\n  const getCurrentMessages = () => {\n    if (activeRoom) {\n      if (localChatRoomMessages && localChatRoomMessages[activeRoom]) {\n        return localChatRoomMessages[activeRoom];\n      }\n      if (gameState.chatRoomMessages && gameState.chatRoomMessages[activeRoom]) {\n        return gameState.chatRoomMessages[activeRoom];\n      }\n      return [];\n    }\n    if (activePrivateChat) {\n      return privateMessages[activePrivateChat] || [];\n    }\n    // Main chat (traitor/faithful)\n    if (localChatRoomMessages && localChatRoomMessages[chatRoom]) {\n      return localChatRoomMessages[chatRoom];\n    }\n    if (gameState.chatRoomMessages && gameState.chatRoomMessages[chatRoom]) {\n      return gameState.chatRoomMessages[chatRoom];\n    }\n    return [];\n  };\n  const getCurrentRoomMembers = () => {\n    if (activeRoom && gameState.allChatRooms) {\n      const room = gameState.allChatRooms.find(r => r.roomId === activeRoom);\n      return room ? room.members : [];\n    }\n    return [];\n  };\n  const getInitials = name => {\n    return name.split(' ').map(word => word.charAt(0)).join('').toUpperCase().slice(0, 2);\n  };\n  const renderMessage = (msg, index) => {\n    const isOwnMessage = msg.playerId === (socket === null || socket === void 0 ? void 0 : socket.id) || msg.from === (socket === null || socket === void 0 ? void 0 : socket.id);\n    const isSystem = !msg.playerId && !msg.from;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `chat-message ${isOwnMessage ? 'own-message' : 'other-message'}${isSystem ? ' system-message' : ''}`,\n      style: {\n        display: 'flex',\n        flexDirection: isOwnMessage ? 'row-reverse' : 'row',\n        alignItems: 'flex-end',\n        gap: 12,\n        margin: '12px 0',\n        padding: 0,\n        background: 'none'\n      },\n      children: [!isSystem && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-avatar\",\n        style: {\n          width: 44,\n          height: 44,\n          borderRadius: '50%',\n          background: isOwnMessage ? 'linear-gradient(135deg, #ff6b6b 60%, #ee5a24 100%)' : 'linear-gradient(135deg, #4ecdc4 60%, #44a08d 100%)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: 18,\n          fontWeight: 700,\n          color: 'white',\n          boxShadow: isOwnMessage ? '0 2px 12px #ff6b6b55' : '0 2px 12px #4ecdc455',\n          border: isOwnMessage ? '2px solid #fff' : '2px solid #4ecdc4',\n          marginLeft: isOwnMessage ? 0 : 4,\n          marginRight: isOwnMessage ? 4 : 0\n        },\n        \"aria-label\": `${msg.playerName}'s avatar`,\n        children: getInitials(msg.playerName)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: isSystem ? 'linear-gradient(90deg, #333 60%, #444 100%)' : isOwnMessage ? 'linear-gradient(90deg, #ff6b6b 60%, #ee5a24 100%)' : 'linear-gradient(90deg, #222 60%, #4ecdc4 100%)',\n          color: isSystem ? '#ffd700' : '#fff',\n          borderLeft: isOwnMessage ? '4px solid #ff6b6b' : isSystem ? '4px solid #ffd700' : '4px solid #4ecdc4',\n          boxShadow: isOwnMessage ? '0 2px 12px #ff6b6b55' : isSystem ? '0 2px 12px #ffd70055' : '0 2px 12px #4ecdc455',\n          fontWeight: isSystem ? 700 : 400,\n          fontStyle: isSystem ? 'italic' : 'normal',\n          borderRadius: isOwnMessage ? '18px 4px 18px 18px' : '4px 18px 18px 18px',\n          padding: '16px 22px',\n          fontSize: 17,\n          letterSpacing: 0.1,\n          minWidth: 80,\n          maxWidth: 340,\n          position: 'relative',\n          overflow: 'hidden',\n          marginLeft: isOwnMessage ? 0 : 8,\n          marginRight: isOwnMessage ? 8 : 0,\n          border: isOwnMessage ? '2px solid #ff6b6b' : '2px solid #4ecdc4',\n          transition: 'background 0.3s, box-shadow 0.3s'\n        },\n        children: [!isSystem && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-name\",\n          style: {\n            color: isOwnMessage ? '#fff' : '#4ecdc4',\n            fontWeight: 700,\n            marginBottom: 2,\n            fontSize: 14\n          },\n          children: msg.playerName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-text\",\n          style: {\n            fontSize: 16,\n            color: '#fff',\n            marginBottom: 2\n          },\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '11px',\n            color: 'rgba(255,255,255,0.6)',\n            marginTop: 6,\n            textAlign: isOwnMessage ? 'right' : 'left',\n            fontStyle: 'italic',\n            letterSpacing: 0.1\n          },\n          children: new Date(msg.timestamp).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this);\n  };\n  const renderTypingIndicator = () => {\n    if (typingUsers.size === 0) return null;\n    const typingList = Array.from(typingUsers).join(', ');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"typing-indicator\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        padding: '8px 16px',\n        color: 'rgba(255,255,255,0.7)',\n        fontSize: '14px',\n        fontStyle: 'italic'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-dots\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [typingList, \" \", typingUsers.size === 1 ? 'is' : 'are', \" typing...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Helper: List of possible private chat targets (alive players except self)\n  const privateChatTargets = gameState.players.filter(p => p.id !== socket.id && !p.isEliminated);\n\n  // Helper: List of available group chat rooms\n  const groupRooms = gameState.allChatRooms || [];\n\n  // Helper: List of active private chats (by id)\n  const activePrivateChats = Object.keys(privateMessages);\n\n  // UI: Chat mode switcher\n  const renderChatMenu = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      background: 'rgba(20,30,40,0.98)',\n      zIndex: 3000,\n      padding: 24,\n      borderRadius: 12,\n      boxShadow: '0 2px 16px #0008',\n      color: '#fff',\n      textAlign: 'left',\n      maxWidth: 420,\n      margin: '0 auto',\n      fontSize: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: 12\n      },\n      children: \"Switch Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        style: {\n          marginBottom: 8,\n          width: '100%'\n        },\n        onClick: () => {\n          setShowChatMenu(false);\n          setActiveRoom(null);\n          setActivePrivateChat(null);\n        },\n        children: playerRole === 'traitor' && gameState.phase === 'traitor_meeting' ? 'Traitor Chat' : playerRole === 'faithful' ? 'Faithful Chat' : 'Main Chat'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          marginBottom: 4\n        },\n        children: \"Group Chat Rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), groupRooms.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 13,\n          color: '#aaa'\n        },\n        children: \"No group rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 37\n      }, this), groupRooms.map(room => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        style: {\n          marginBottom: 6,\n          width: '100%'\n        },\n        onClick: () => {\n          setShowChatMenu(false);\n          setActiveRoom(room.roomId);\n          setActivePrivateChat(null);\n        },\n        children: [room.name, \" (\", room.members.length, \" members)\"]\n      }, room.roomId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          marginBottom: 4\n        },\n        children: \"Private Chats\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), privateChatTargets.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 13,\n          color: '#aaa'\n        },\n        children: \"No available players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 45\n      }, this), privateChatTargets.map(p => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        style: {\n          marginBottom: 6,\n          width: '100%'\n        },\n        onClick: () => {\n          setShowChatMenu(false);\n          setActivePrivateChat(p.id);\n          setActiveRoom(null);\n        },\n        children: p.name\n      }, p.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-danger\",\n      style: {\n        marginTop: 18,\n        width: '100%'\n      },\n      onClick: () => setShowChatMenu(false),\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    \"aria-label\": \"Chat system\",\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-secondary\",\n      style: {\n        position: 'absolute',\n        top: 8,\n        right: 8,\n        zIndex: 3100,\n        fontSize: 13\n      },\n      onClick: () => setShowChatMenu(v => !v),\n      \"aria-label\": \"Switch chat mode\",\n      children: \"Switch Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), showChatMenu && renderChatMenu(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-title\",\n        children: getCurrentChatTitle()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '12px',\n          color: 'rgba(255,255,255,0.6)'\n        },\n        children: [getCurrentMessages().length, \" messages\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), activeRoom && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#4ecdc4',\n        marginBottom: 8\n      },\n      children: [\"Members: \", getCurrentRoomMembers().join(', ')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      \"aria-live\": \"polite\",\n      children: [getCurrentMessages().map((msg, index) => renderMessage(msg, index)), renderTypingIndicator(), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        type: \"text\",\n        placeholder: \"Type a message...\",\n        value: message,\n        onChange: e => setMessage(e.target.value),\n        onKeyPress: handleKeyPress,\n        disabled: !canChat && !activeRoom && !activePrivateChat,\n        \"aria-label\": \"Type a message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: handleSendMessage,\n        disabled: !message.trim() || !canChat && !activeRoom && !activePrivateChat,\n        \"aria-label\": \"Send message\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 383,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatSystem, \"1yEu1pn7s2ihjEzxxUVfbbydYyw=\");\n_c = ChatSystem;\nexport default ChatSystem;\nvar _c;\n$RefreshReg$(_c, \"ChatSystem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatSystem","gameState","playerRole","canChat","chatRoom","activeRoom","activePrivateChat","privateMessages","availableRooms","newRoomName","setNewRoomName","onSendMessage","onSendRoomMessage","onSendPrivateMessage","onCreateRoom","onJoinRoom","onStartPrivateChat","socket","setActiveRoom","setActivePrivateChat","_s","message","setMessage","isTyping","setIsTyping","typingUsers","setTypingUsers","Set","localChatRoomMessages","setLocalChatRoomMessages","messagesEndRef","typingTimeoutRef","showChatMenu","setShowChatMenu","chatRoomMessages","handleRoomMessage","msg","prev","arr","roomId","push","on","off","handleMessage","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","emit","clearTimeout","setTimeout","handleTyping","playerId","playerName","userTyping","id","newSet","add","delete","handleChatRoomInvited","roomName","alert","handleSendMessage","trim","handleKeyPress","e","key","shiftKey","preventDefault","getCurrentChatTitle","room","find","r","name","player","players","p","getCurrentMessages","getCurrentRoomMembers","allChatRooms","members","getInitials","split","map","word","charAt","join","toUpperCase","slice","renderMessage","index","isOwnMessage","from","isSystem","className","style","display","flexDirection","alignItems","gap","margin","padding","background","children","width","height","borderRadius","justifyContent","fontSize","fontWeight","color","boxShadow","border","marginLeft","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","borderLeft","fontStyle","letterSpacing","minWidth","maxWidth","position","overflow","transition","marginBottom","marginTop","textAlign","Date","timestamp","toLocaleTimeString","hour","minute","second","renderTypingIndicator","size","typingList","Array","privateChatTargets","filter","isEliminated","groupRooms","activePrivateChats","Object","keys","renderChatMenu","top","left","zIndex","onClick","phase","length","right","v","ref","type","placeholder","value","onChange","target","onKeyPress","disabled","_c","$RefreshReg$"],"sources":["D:/Traitors/client/src/components/ChatSystem.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nfunction ChatSystem({ \r\n  gameState, \r\n  playerRole, \r\n  canChat, \r\n  chatRoom, \r\n  activeRoom, \r\n  activePrivateChat, \r\n  privateMessages, \r\n  availableRooms,\r\n  newRoomName,\r\n  setNewRoomName,\r\n  onSendMessage,\r\n  onSendRoomMessage,\r\n  onSendPrivateMessage,\r\n  onCreateRoom,\r\n  onJoinRoom,\r\n  onStartPrivateChat,\r\n  socket,\r\n  setActiveRoom,\r\n  setActivePrivateChat\r\n}) {\r\n  const [message, setMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [typingUsers, setTypingUsers] = useState(new Set());\r\n  const [localChatRoomMessages, setLocalChatRoomMessages] = useState({});\r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n  const [showChatMenu, setShowChatMenu] = useState(false);\r\n\r\n  // Merge gameState.chatRoomMessages into local state on update\r\n  useEffect(() => {\r\n    setLocalChatRoomMessages(gameState.chatRoomMessages || {});\r\n  }, [gameState.chatRoomMessages]);\r\n\r\n  // Listen for new room messages and update local state\r\n  useEffect(() => {\r\n    const handleRoomMessage = (msg) => {\r\n      setLocalChatRoomMessages(prev => {\r\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\r\n        arr.push(msg);\r\n        return { ...prev, [msg.roomId]: arr };\r\n      });\r\n    };\r\n    socket.on('roomMessage', handleRoomMessage);\r\n    return () => socket.off('roomMessage', handleRoomMessage);\r\n  }, [socket]);\r\n\r\n  // Listen for main chat messages (traitor/faithful main chat)\r\n  useEffect(() => {\r\n    const handleMessage = (msg) => {\r\n      setLocalChatRoomMessages(prev => {\r\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\r\n        arr.push(msg);\r\n        return { ...prev, [msg.roomId]: arr };\r\n      });\r\n    };\r\n    socket.on('message', handleMessage);\r\n    return () => socket.off('message', handleMessage);\r\n  }, [socket]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [gameState.chatRoomMessages, privateMessages]);\r\n\r\n  // Typing indicator logic\r\n  useEffect(() => {\r\n    if (message && !isTyping) {\r\n      setIsTyping(true);\r\n      socket.emit('typing', { isTyping: true, roomId: activeRoom || chatRoom });\r\n    } else if (!message && isTyping) {\r\n      setIsTyping(false);\r\n      socket.emit('typing', { isTyping: false, roomId: activeRoom || chatRoom });\r\n    }\r\n\r\n    // Clear typing indicator after 3 seconds of no typing\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n    if (message) {\r\n      typingTimeoutRef.current = setTimeout(() => {\r\n        setIsTyping(false);\r\n        socket.emit('typing', { isTyping: false, roomId: activeRoom || chatRoom });\r\n      }, 3000);\r\n    }\r\n\r\n    return () => {\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [message, isTyping, socket, activeRoom, chatRoom]);\r\n\r\n  // Listen for typing events\r\n  useEffect(() => {\r\n    const handleTyping = ({ playerId, playerName, isTyping: userTyping }) => {\r\n      if (playerId === socket?.id) return;\r\n      \r\n      setTypingUsers(prev => {\r\n        const newSet = new Set(prev);\r\n        if (userTyping) {\r\n          newSet.add(playerName);\r\n        } else {\r\n          newSet.delete(playerName);\r\n        }\r\n        return newSet;\r\n      });\r\n    };\r\n\r\n    socket.on('userTyping', handleTyping);\r\n    return () => socket.off('userTyping', handleTyping);\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    // Listen for chatRoomInvited event\r\n    const handleChatRoomInvited = ({ roomId, roomName }) => {\r\n      alert(`You have been invited to join room: ${roomName}`);\r\n      onJoinRoom(roomId);\r\n    };\r\n    socket.on('chatRoomInvited', handleChatRoomInvited);\r\n    return () => socket.off('chatRoomInvited', handleChatRoomInvited);\r\n  }, [socket, onJoinRoom]);\r\n\r\n  const handleSendMessage = () => {\r\n    if (!message.trim()) return;\r\n    if (activeRoom) {\r\n      onSendRoomMessage();\r\n      setMessage('');\r\n    } else if (activePrivateChat) {\r\n      onSendPrivateMessage();\r\n      setMessage('');\r\n    } else if (canChat) {\r\n      onSendMessage(chatRoom, message);\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const getCurrentChatTitle = () => {\r\n    if (activeRoom) {\r\n      const room = availableRooms.find(r => r.roomId === activeRoom);\r\n      return `Room: ${room?.name || 'Unknown'}`;\r\n    }\r\n    if (activePrivateChat) {\r\n      const player = gameState.players.find(p => p.id === activePrivateChat);\r\n      return `Private: ${player?.name || 'Unknown'}`;\r\n    }\r\n    if (canChat) {\r\n      return 'Group Discussion';\r\n    }\r\n    return 'Chat';\r\n  };\r\n\r\n  const getCurrentMessages = () => {\r\n    if (activeRoom) {\r\n      if (localChatRoomMessages && localChatRoomMessages[activeRoom]) {\r\n        return localChatRoomMessages[activeRoom];\r\n      }\r\n      if (gameState.chatRoomMessages && gameState.chatRoomMessages[activeRoom]) {\r\n        return gameState.chatRoomMessages[activeRoom];\r\n      }\r\n      return [];\r\n    }\r\n    if (activePrivateChat) {\r\n      return privateMessages[activePrivateChat] || [];\r\n    }\r\n    // Main chat (traitor/faithful)\r\n    if (localChatRoomMessages && localChatRoomMessages[chatRoom]) {\r\n      return localChatRoomMessages[chatRoom];\r\n    }\r\n    if (gameState.chatRoomMessages && gameState.chatRoomMessages[chatRoom]) {\r\n      return gameState.chatRoomMessages[chatRoom];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getCurrentRoomMembers = () => {\r\n    if (activeRoom && gameState.allChatRooms) {\r\n      const room = gameState.allChatRooms.find(r => r.roomId === activeRoom);\r\n      return room ? room.members : [];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getInitials = (name) => {\r\n    return name\r\n      .split(' ')\r\n      .map(word => word.charAt(0))\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const renderMessage = (msg, index) => {\r\n    const isOwnMessage = msg.playerId === socket?.id || msg.from === socket?.id;\r\n    const isSystem = !msg.playerId && !msg.from;\r\n    return (\r\n      <div\r\n        key={index}\r\n        className={`chat-message ${isOwnMessage ? 'own-message' : 'other-message'}${isSystem ? ' system-message' : ''}`}\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: isOwnMessage ? 'row-reverse' : 'row',\r\n          alignItems: 'flex-end',\r\n          gap: 12,\r\n          margin: '12px 0',\r\n          padding: 0,\r\n          background: 'none',\r\n        }}\r\n      >\r\n        {/* Avatar/Initials */}\r\n        {!isSystem && (\r\n          <div\r\n            className=\"message-avatar\"\r\n            style={{\r\n              width: 44,\r\n              height: 44,\r\n              borderRadius: '50%',\r\n              background: isOwnMessage\r\n                ? 'linear-gradient(135deg, #ff6b6b 60%, #ee5a24 100%)'\r\n                : 'linear-gradient(135deg, #4ecdc4 60%, #44a08d 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: 18,\r\n              fontWeight: 700,\r\n              color: 'white',\r\n              boxShadow: isOwnMessage\r\n                ? '0 2px 12px #ff6b6b55'\r\n                : '0 2px 12px #4ecdc455',\r\n              border: isOwnMessage ? '2px solid #fff' : '2px solid #4ecdc4',\r\n              marginLeft: isOwnMessage ? 0 : 4,\r\n              marginRight: isOwnMessage ? 4 : 0,\r\n            }}\r\n            aria-label={`${msg.playerName}'s avatar`}\r\n          >\r\n            {getInitials(msg.playerName)}\r\n          </div>\r\n        )}\r\n        {/* Message Bubble */}\r\n        <div\r\n          style={{\r\n            background: isSystem\r\n              ? 'linear-gradient(90deg, #333 60%, #444 100%)'\r\n              : isOwnMessage\r\n              ? 'linear-gradient(90deg, #ff6b6b 60%, #ee5a24 100%)'\r\n              : 'linear-gradient(90deg, #222 60%, #4ecdc4 100%)',\r\n            color: isSystem ? '#ffd700' : '#fff',\r\n            borderLeft: isOwnMessage ? '4px solid #ff6b6b' : isSystem ? '4px solid #ffd700' : '4px solid #4ecdc4',\r\n            boxShadow: isOwnMessage ? '0 2px 12px #ff6b6b55' : isSystem ? '0 2px 12px #ffd70055' : '0 2px 12px #4ecdc455',\r\n            fontWeight: isSystem ? 700 : 400,\r\n            fontStyle: isSystem ? 'italic' : 'normal',\r\n            borderRadius: isOwnMessage ? '18px 4px 18px 18px' : '4px 18px 18px 18px',\r\n            padding: '16px 22px',\r\n            fontSize: 17,\r\n            letterSpacing: 0.1,\r\n            minWidth: 80,\r\n            maxWidth: 340,\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            marginLeft: isOwnMessage ? 0 : 8,\r\n            marginRight: isOwnMessage ? 8 : 0,\r\n            border: isOwnMessage ? '2px solid #ff6b6b' : '2px solid #4ecdc4',\r\n            transition: 'background 0.3s, box-shadow 0.3s',\r\n          }}\r\n        >\r\n          {!isSystem && (\r\n            <div className=\"player-name\" style={{ color: isOwnMessage ? '#fff' : '#4ecdc4', fontWeight: 700, marginBottom: 2, fontSize: 14 }}>\r\n              {msg.playerName}\r\n            </div>\r\n          )}\r\n          <div className=\"message-text\" style={{ fontSize: 16, color: '#fff', marginBottom: 2 }}>\r\n            {msg.message}\r\n          </div>\r\n          <div style={{\r\n            fontSize: '11px',\r\n            color: 'rgba(255,255,255,0.6)',\r\n            marginTop: 6,\r\n            textAlign: isOwnMessage ? 'right' : 'left',\r\n            fontStyle: 'italic',\r\n            letterSpacing: 0.1,\r\n          }}>\r\n            {new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderTypingIndicator = () => {\r\n    if (typingUsers.size === 0) return null;\r\n    \r\n    const typingList = Array.from(typingUsers).join(', ');\r\n    return (\r\n      <div className=\"typing-indicator\" style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        padding: '8px 16px',\r\n        color: 'rgba(255,255,255,0.7)',\r\n        fontSize: '14px',\r\n        fontStyle: 'italic',\r\n      }}>\r\n        <div className=\"typing-dots\">\r\n          <span className=\"dot\" />\r\n          <span className=\"dot\" />\r\n          <span className=\"dot\" />\r\n        </div>\r\n        <span>{typingList} {typingUsers.size === 1 ? 'is' : 'are'} typing...</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Helper: List of possible private chat targets (alive players except self)\r\n  const privateChatTargets = gameState.players.filter(\r\n    p => p.id !== socket.id && !p.isEliminated\r\n  );\r\n\r\n  // Helper: List of available group chat rooms\r\n  const groupRooms = gameState.allChatRooms || [];\r\n\r\n  // Helper: List of active private chats (by id)\r\n  const activePrivateChats = Object.keys(privateMessages);\r\n\r\n  // UI: Chat mode switcher\r\n  const renderChatMenu = () => (\r\n    <div style={{\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      background: 'rgba(20,30,40,0.98)',\r\n      zIndex: 3000,\r\n      padding: 24,\r\n      borderRadius: 12,\r\n      boxShadow: '0 2px 16px #0008',\r\n      color: '#fff',\r\n      textAlign: 'left',\r\n      maxWidth: 420,\r\n      margin: '0 auto',\r\n      fontSize: 16\r\n    }}>\r\n      <h3 style={{ marginBottom: 12 }}>Switch Chat</h3>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <button className=\"btn btn-primary\" style={{ marginBottom: 8, width: '100%' }} onClick={() => { setShowChatMenu(false); setActiveRoom(null); setActivePrivateChat(null); }}>\r\n          {playerRole === 'traitor' && gameState.phase === 'traitor_meeting' ? 'Traitor Chat' : playerRole === 'faithful' ? 'Faithful Chat' : 'Main Chat'}\r\n        </button>\r\n      </div>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <div style={{ fontWeight: 700, marginBottom: 4 }}>Group Chat Rooms</div>\r\n        {groupRooms.length === 0 && <div style={{ fontSize: 13, color: '#aaa' }}>No group rooms</div>}\r\n        {groupRooms.map(room => (\r\n          <button key={room.roomId} className=\"btn btn-secondary\" style={{ marginBottom: 6, width: '100%' }} onClick={() => { setShowChatMenu(false); setActiveRoom(room.roomId); setActivePrivateChat(null); }}>\r\n            {room.name} ({room.members.length} members)\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <div>\r\n        <div style={{ fontWeight: 700, marginBottom: 4 }}>Private Chats</div>\r\n        {privateChatTargets.length === 0 && <div style={{ fontSize: 13, color: '#aaa' }}>No available players</div>}\r\n        {privateChatTargets.map(p => (\r\n          <button key={p.id} className=\"btn btn-secondary\" style={{ marginBottom: 6, width: '100%' }} onClick={() => { setShowChatMenu(false); setActivePrivateChat(p.id); setActiveRoom(null); }}>\r\n            {p.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <button className=\"btn btn-danger\" style={{ marginTop: 18, width: '100%' }} onClick={() => setShowChatMenu(false)}>Close</button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"chat-container\" aria-label=\"Chat system\" style={{ position: 'relative' }}>\r\n      {/* Chat Mode Switcher Button */}\r\n      <button\r\n        className=\"btn btn-secondary\"\r\n        style={{ position: 'absolute', top: 8, right: 8, zIndex: 3100, fontSize: 13 }}\r\n        onClick={() => setShowChatMenu(v => !v)}\r\n        aria-label=\"Switch chat mode\"\r\n      >\r\n        Switch Chat\r\n      </button>\r\n      {showChatMenu && renderChatMenu()}\r\n      <div className=\"chat-header\">\r\n        <div className=\"chat-title\">{getCurrentChatTitle()}</div>\r\n        <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.6)' }}>\r\n          {getCurrentMessages().length} messages\r\n        </div>\r\n      </div>\r\n\r\n      {/* Show room members if in a group chat */}\r\n      {activeRoom && (\r\n        <div style={{ fontSize: 12, color: '#4ecdc4', marginBottom: 8 }}>\r\n          Members: {getCurrentRoomMembers().join(', ')}\r\n        </div>\r\n      )}\r\n\r\n      {/* Messages */}\r\n      <div className=\"chat-messages\" aria-live=\"polite\">\r\n        {getCurrentMessages().map((msg, index) => renderMessage(msg, index))}\r\n        {renderTypingIndicator()}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div className=\"chat-input\">\r\n        <input\r\n          className=\"input\"\r\n          type=\"text\"\r\n          placeholder=\"Type a message...\"\r\n          value={message}\r\n          onChange={e => setMessage(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          disabled={!canChat && !activeRoom && !activePrivateChat}\r\n          aria-label=\"Type a message\"\r\n        />\r\n        <button\r\n          className=\"btn\"\r\n          onClick={handleSendMessage}\r\n          disabled={!message.trim() || (!canChat && !activeRoom && !activePrivateChat)}\r\n          aria-label=\"Send message\"\r\n        >\r\n          Send\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatSystem; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,SAASC,UAAUA,CAAC;EAClBC,SAAS;EACTC,UAAU;EACVC,OAAO;EACPC,QAAQ;EACRC,UAAU;EACVC,iBAAiB;EACjBC,eAAe;EACfC,cAAc;EACdC,WAAW;EACXC,cAAc;EACdC,aAAa;EACbC,iBAAiB;EACjBC,oBAAoB;EACpBC,YAAY;EACZC,UAAU;EACVC,kBAAkB;EAClBC,MAAM;EACNC,aAAa;EACbC;AACF,CAAC,EAAE;EAAAC,EAAA;EACD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC4B,QAAQ,EAAEC,WAAW,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAAC8B,WAAW,EAAEC,cAAc,CAAC,GAAG/B,QAAQ,CAAC,IAAIgC,GAAG,CAAC,CAAC,CAAC;EACzD,MAAM,CAACC,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGlC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtE,MAAMmC,cAAc,GAAGjC,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMkC,gBAAgB,GAAGlC,MAAM,CAAC,IAAI,CAAC;EACrC,MAAM,CAACmC,YAAY,EAAEC,eAAe,CAAC,GAAGtC,QAAQ,CAAC,KAAK,CAAC;;EAEvD;EACAC,SAAS,CAAC,MAAM;IACdiC,wBAAwB,CAAC5B,SAAS,CAACiC,gBAAgB,IAAI,CAAC,CAAC,CAAC;EAC5D,CAAC,EAAE,CAACjC,SAAS,CAACiC,gBAAgB,CAAC,CAAC;;EAEhC;EACAtC,SAAS,CAAC,MAAM;IACd,MAAMuC,iBAAiB,GAAIC,GAAG,IAAK;MACjCP,wBAAwB,CAACQ,IAAI,IAAI;QAC/B,MAAMC,GAAG,GAAGD,IAAI,CAACD,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,GAAGF,IAAI,CAACD,GAAG,CAACG,MAAM,CAAC,CAAC,GAAG,EAAE;QACzDD,GAAG,CAACE,IAAI,CAACJ,GAAG,CAAC;QACb,OAAO;UAAE,GAAGC,IAAI;UAAE,CAACD,GAAG,CAACG,MAAM,GAAGD;QAAI,CAAC;MACvC,CAAC,CAAC;IACJ,CAAC;IACDrB,MAAM,CAACwB,EAAE,CAAC,aAAa,EAAEN,iBAAiB,CAAC;IAC3C,OAAO,MAAMlB,MAAM,CAACyB,GAAG,CAAC,aAAa,EAAEP,iBAAiB,CAAC;EAC3D,CAAC,EAAE,CAAClB,MAAM,CAAC,CAAC;;EAEZ;EACArB,SAAS,CAAC,MAAM;IACd,MAAM+C,aAAa,GAAIP,GAAG,IAAK;MAC7BP,wBAAwB,CAACQ,IAAI,IAAI;QAC/B,MAAMC,GAAG,GAAGD,IAAI,CAACD,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,GAAGF,IAAI,CAACD,GAAG,CAACG,MAAM,CAAC,CAAC,GAAG,EAAE;QACzDD,GAAG,CAACE,IAAI,CAACJ,GAAG,CAAC;QACb,OAAO;UAAE,GAAGC,IAAI;UAAE,CAACD,GAAG,CAACG,MAAM,GAAGD;QAAI,CAAC;MACvC,CAAC,CAAC;IACJ,CAAC;IACDrB,MAAM,CAACwB,EAAE,CAAC,SAAS,EAAEE,aAAa,CAAC;IACnC,OAAO,MAAM1B,MAAM,CAACyB,GAAG,CAAC,SAAS,EAAEC,aAAa,CAAC;EACnD,CAAC,EAAE,CAAC1B,MAAM,CAAC,CAAC;EAEZ,MAAM2B,cAAc,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA;IAC3B,CAAAA,qBAAA,GAAAf,cAAc,CAACgB,OAAO,cAAAD,qBAAA,uBAAtBA,qBAAA,CAAwBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAChE,CAAC;EAEDpD,SAAS,CAAC,MAAM;IACdgD,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAAC3C,SAAS,CAACiC,gBAAgB,EAAE3B,eAAe,CAAC,CAAC;;EAEjD;EACAX,SAAS,CAAC,MAAM;IACd,IAAIyB,OAAO,IAAI,CAACE,QAAQ,EAAE;MACxBC,WAAW,CAAC,IAAI,CAAC;MACjBP,MAAM,CAACgC,IAAI,CAAC,QAAQ,EAAE;QAAE1B,QAAQ,EAAE,IAAI;QAAEgB,MAAM,EAAElC,UAAU,IAAID;MAAS,CAAC,CAAC;IAC3E,CAAC,MAAM,IAAI,CAACiB,OAAO,IAAIE,QAAQ,EAAE;MAC/BC,WAAW,CAAC,KAAK,CAAC;MAClBP,MAAM,CAACgC,IAAI,CAAC,QAAQ,EAAE;QAAE1B,QAAQ,EAAE,KAAK;QAAEgB,MAAM,EAAElC,UAAU,IAAID;MAAS,CAAC,CAAC;IAC5E;;IAEA;IACA,IAAI2B,gBAAgB,CAACe,OAAO,EAAE;MAC5BI,YAAY,CAACnB,gBAAgB,CAACe,OAAO,CAAC;IACxC;IACA,IAAIzB,OAAO,EAAE;MACXU,gBAAgB,CAACe,OAAO,GAAGK,UAAU,CAAC,MAAM;QAC1C3B,WAAW,CAAC,KAAK,CAAC;QAClBP,MAAM,CAACgC,IAAI,CAAC,QAAQ,EAAE;UAAE1B,QAAQ,EAAE,KAAK;UAAEgB,MAAM,EAAElC,UAAU,IAAID;QAAS,CAAC,CAAC;MAC5E,CAAC,EAAE,IAAI,CAAC;IACV;IAEA,OAAO,MAAM;MACX,IAAI2B,gBAAgB,CAACe,OAAO,EAAE;QAC5BI,YAAY,CAACnB,gBAAgB,CAACe,OAAO,CAAC;MACxC;IACF,CAAC;EACH,CAAC,EAAE,CAACzB,OAAO,EAAEE,QAAQ,EAAEN,MAAM,EAAEZ,UAAU,EAAED,QAAQ,CAAC,CAAC;;EAErD;EACAR,SAAS,CAAC,MAAM;IACd,MAAMwD,YAAY,GAAGA,CAAC;MAAEC,QAAQ;MAAEC,UAAU;MAAE/B,QAAQ,EAAEgC;IAAW,CAAC,KAAK;MACvE,IAAIF,QAAQ,MAAKpC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuC,EAAE,GAAE;MAE7B9B,cAAc,CAACW,IAAI,IAAI;QACrB,MAAMoB,MAAM,GAAG,IAAI9B,GAAG,CAACU,IAAI,CAAC;QAC5B,IAAIkB,UAAU,EAAE;UACdE,MAAM,CAACC,GAAG,CAACJ,UAAU,CAAC;QACxB,CAAC,MAAM;UACLG,MAAM,CAACE,MAAM,CAACL,UAAU,CAAC;QAC3B;QACA,OAAOG,MAAM;MACf,CAAC,CAAC;IACJ,CAAC;IAEDxC,MAAM,CAACwB,EAAE,CAAC,YAAY,EAAEW,YAAY,CAAC;IACrC,OAAO,MAAMnC,MAAM,CAACyB,GAAG,CAAC,YAAY,EAAEU,YAAY,CAAC;EACrD,CAAC,EAAE,CAACnC,MAAM,CAAC,CAAC;EAEZrB,SAAS,CAAC,MAAM;IACd;IACA,MAAMgE,qBAAqB,GAAGA,CAAC;MAAErB,MAAM;MAAEsB;IAAS,CAAC,KAAK;MACtDC,KAAK,CAAC,uCAAuCD,QAAQ,EAAE,CAAC;MACxD9C,UAAU,CAACwB,MAAM,CAAC;IACpB,CAAC;IACDtB,MAAM,CAACwB,EAAE,CAAC,iBAAiB,EAAEmB,qBAAqB,CAAC;IACnD,OAAO,MAAM3C,MAAM,CAACyB,GAAG,CAAC,iBAAiB,EAAEkB,qBAAqB,CAAC;EACnE,CAAC,EAAE,CAAC3C,MAAM,EAAEF,UAAU,CAAC,CAAC;EAExB,MAAMgD,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAI,CAAC1C,OAAO,CAAC2C,IAAI,CAAC,CAAC,EAAE;IACrB,IAAI3D,UAAU,EAAE;MACdO,iBAAiB,CAAC,CAAC;MACnBU,UAAU,CAAC,EAAE,CAAC;IAChB,CAAC,MAAM,IAAIhB,iBAAiB,EAAE;MAC5BO,oBAAoB,CAAC,CAAC;MACtBS,UAAU,CAAC,EAAE,CAAC;IAChB,CAAC,MAAM,IAAInB,OAAO,EAAE;MAClBQ,aAAa,CAACP,QAAQ,EAAEiB,OAAO,CAAC;MAChCC,UAAU,CAAC,EAAE,CAAC;IAChB;EACF,CAAC;EAED,MAAM2C,cAAc,GAAIC,CAAC,IAAK;IAC5B,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,IAAI,CAACD,CAAC,CAACE,QAAQ,EAAE;MACpCF,CAAC,CAACG,cAAc,CAAC,CAAC;MAClBN,iBAAiB,CAAC,CAAC;IACrB;EACF,CAAC;EAED,MAAMO,mBAAmB,GAAGA,CAAA,KAAM;IAChC,IAAIjE,UAAU,EAAE;MACd,MAAMkE,IAAI,GAAG/D,cAAc,CAACgE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAClC,MAAM,KAAKlC,UAAU,CAAC;MAC9D,OAAO,SAAS,CAAAkE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,IAAI,KAAI,SAAS,EAAE;IAC3C;IACA,IAAIpE,iBAAiB,EAAE;MACrB,MAAMqE,MAAM,GAAG1E,SAAS,CAAC2E,OAAO,CAACJ,IAAI,CAACK,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKlD,iBAAiB,CAAC;MACtE,OAAO,YAAY,CAAAqE,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAED,IAAI,KAAI,SAAS,EAAE;IAChD;IACA,IAAIvE,OAAO,EAAE;MACX,OAAO,kBAAkB;IAC3B;IACA,OAAO,MAAM;EACf,CAAC;EAED,MAAM2E,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAIzE,UAAU,EAAE;MACd,IAAIuB,qBAAqB,IAAIA,qBAAqB,CAACvB,UAAU,CAAC,EAAE;QAC9D,OAAOuB,qBAAqB,CAACvB,UAAU,CAAC;MAC1C;MACA,IAAIJ,SAAS,CAACiC,gBAAgB,IAAIjC,SAAS,CAACiC,gBAAgB,CAAC7B,UAAU,CAAC,EAAE;QACxE,OAAOJ,SAAS,CAACiC,gBAAgB,CAAC7B,UAAU,CAAC;MAC/C;MACA,OAAO,EAAE;IACX;IACA,IAAIC,iBAAiB,EAAE;MACrB,OAAOC,eAAe,CAACD,iBAAiB,CAAC,IAAI,EAAE;IACjD;IACA;IACA,IAAIsB,qBAAqB,IAAIA,qBAAqB,CAACxB,QAAQ,CAAC,EAAE;MAC5D,OAAOwB,qBAAqB,CAACxB,QAAQ,CAAC;IACxC;IACA,IAAIH,SAAS,CAACiC,gBAAgB,IAAIjC,SAAS,CAACiC,gBAAgB,CAAC9B,QAAQ,CAAC,EAAE;MACtE,OAAOH,SAAS,CAACiC,gBAAgB,CAAC9B,QAAQ,CAAC;IAC7C;IACA,OAAO,EAAE;EACX,CAAC;EAED,MAAM2E,qBAAqB,GAAGA,CAAA,KAAM;IAClC,IAAI1E,UAAU,IAAIJ,SAAS,CAAC+E,YAAY,EAAE;MACxC,MAAMT,IAAI,GAAGtE,SAAS,CAAC+E,YAAY,CAACR,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAClC,MAAM,KAAKlC,UAAU,CAAC;MACtE,OAAOkE,IAAI,GAAGA,IAAI,CAACU,OAAO,GAAG,EAAE;IACjC;IACA,OAAO,EAAE;EACX,CAAC;EAED,MAAMC,WAAW,GAAIR,IAAI,IAAK;IAC5B,OAAOA,IAAI,CACRS,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC,CAC3BC,IAAI,CAAC,EAAE,CAAC,CACRC,WAAW,CAAC,CAAC,CACbC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAChB,CAAC;EAED,MAAMC,aAAa,GAAGA,CAACtD,GAAG,EAAEuD,KAAK,KAAK;IACpC,MAAMC,YAAY,GAAGxD,GAAG,CAACiB,QAAQ,MAAKpC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuC,EAAE,KAAIpB,GAAG,CAACyD,IAAI,MAAK5E,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuC,EAAE;IAC3E,MAAMsC,QAAQ,GAAG,CAAC1D,GAAG,CAACiB,QAAQ,IAAI,CAACjB,GAAG,CAACyD,IAAI;IAC3C,oBACE9F,OAAA;MAEEgG,SAAS,EAAE,gBAAgBH,YAAY,GAAG,aAAa,GAAG,eAAe,GAAGE,QAAQ,GAAG,iBAAiB,GAAG,EAAE,EAAG;MAChHE,KAAK,EAAE;QACLC,OAAO,EAAE,MAAM;QACfC,aAAa,EAAEN,YAAY,GAAG,aAAa,GAAG,KAAK;QACnDO,UAAU,EAAE,UAAU;QACtBC,GAAG,EAAE,EAAE;QACPC,MAAM,EAAE,QAAQ;QAChBC,OAAO,EAAE,CAAC;QACVC,UAAU,EAAE;MACd,CAAE;MAAAC,QAAA,GAGD,CAACV,QAAQ,iBACR/F,OAAA;QACEgG,SAAS,EAAC,gBAAgB;QAC1BC,KAAK,EAAE;UACLS,KAAK,EAAE,EAAE;UACTC,MAAM,EAAE,EAAE;UACVC,YAAY,EAAE,KAAK;UACnBJ,UAAU,EAAEX,YAAY,GACpB,oDAAoD,GACpD,oDAAoD;UACxDK,OAAO,EAAE,MAAM;UACfE,UAAU,EAAE,QAAQ;UACpBS,cAAc,EAAE,QAAQ;UACxBC,QAAQ,EAAE,EAAE;UACZC,UAAU,EAAE,GAAG;UACfC,KAAK,EAAE,OAAO;UACdC,SAAS,EAAEpB,YAAY,GACnB,sBAAsB,GACtB,sBAAsB;UAC1BqB,MAAM,EAAErB,YAAY,GAAG,gBAAgB,GAAG,mBAAmB;UAC7DsB,UAAU,EAAEtB,YAAY,GAAG,CAAC,GAAG,CAAC;UAChCuB,WAAW,EAAEvB,YAAY,GAAG,CAAC,GAAG;QAClC,CAAE;QACF,cAAY,GAAGxD,GAAG,CAACkB,UAAU,WAAY;QAAAkD,QAAA,EAExCtB,WAAW,CAAC9C,GAAG,CAACkB,UAAU;MAAC;QAAA8D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CACN,eAEDxH,OAAA;QACEiG,KAAK,EAAE;UACLO,UAAU,EAAET,QAAQ,GAChB,6CAA6C,GAC7CF,YAAY,GACZ,mDAAmD,GACnD,gDAAgD;UACpDmB,KAAK,EAAEjB,QAAQ,GAAG,SAAS,GAAG,MAAM;UACpC0B,UAAU,EAAE5B,YAAY,GAAG,mBAAmB,GAAGE,QAAQ,GAAG,mBAAmB,GAAG,mBAAmB;UACrGkB,SAAS,EAAEpB,YAAY,GAAG,sBAAsB,GAAGE,QAAQ,GAAG,sBAAsB,GAAG,sBAAsB;UAC7GgB,UAAU,EAAEhB,QAAQ,GAAG,GAAG,GAAG,GAAG;UAChC2B,SAAS,EAAE3B,QAAQ,GAAG,QAAQ,GAAG,QAAQ;UACzCa,YAAY,EAAEf,YAAY,GAAG,oBAAoB,GAAG,oBAAoB;UACxEU,OAAO,EAAE,WAAW;UACpBO,QAAQ,EAAE,EAAE;UACZa,aAAa,EAAE,GAAG;UAClBC,QAAQ,EAAE,EAAE;UACZC,QAAQ,EAAE,GAAG;UACbC,QAAQ,EAAE,UAAU;UACpBC,QAAQ,EAAE,QAAQ;UAClBZ,UAAU,EAAEtB,YAAY,GAAG,CAAC,GAAG,CAAC;UAChCuB,WAAW,EAAEvB,YAAY,GAAG,CAAC,GAAG,CAAC;UACjCqB,MAAM,EAAErB,YAAY,GAAG,mBAAmB,GAAG,mBAAmB;UAChEmC,UAAU,EAAE;QACd,CAAE;QAAAvB,QAAA,GAED,CAACV,QAAQ,iBACR/F,OAAA;UAAKgG,SAAS,EAAC,aAAa;UAACC,KAAK,EAAE;YAAEe,KAAK,EAAEnB,YAAY,GAAG,MAAM,GAAG,SAAS;YAAEkB,UAAU,EAAE,GAAG;YAAEkB,YAAY,EAAE,CAAC;YAAEnB,QAAQ,EAAE;UAAG,CAAE;UAAAL,QAAA,EAC9HpE,GAAG,CAACkB;QAAU;UAAA8D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CACN,eACDxH,OAAA;UAAKgG,SAAS,EAAC,cAAc;UAACC,KAAK,EAAE;YAAEa,QAAQ,EAAE,EAAE;YAAEE,KAAK,EAAE,MAAM;YAAEiB,YAAY,EAAE;UAAE,CAAE;UAAAxB,QAAA,EACnFpE,GAAG,CAACf;QAAO;UAAA+F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC,eACNxH,OAAA;UAAKiG,KAAK,EAAE;YACVa,QAAQ,EAAE,MAAM;YAChBE,KAAK,EAAE,uBAAuB;YAC9BkB,SAAS,EAAE,CAAC;YACZC,SAAS,EAAEtC,YAAY,GAAG,OAAO,GAAG,MAAM;YAC1C6B,SAAS,EAAE,QAAQ;YACnBC,aAAa,EAAE;UACjB,CAAE;UAAAlB,QAAA,EACC,IAAI2B,IAAI,CAAC/F,GAAG,CAACgG,SAAS,CAAC,CAACC,kBAAkB,CAAC,EAAE,EAAE;YAAEC,IAAI,EAAE,SAAS;YAAEC,MAAM,EAAE,SAAS;YAAEC,MAAM,EAAE;UAAU,CAAC;QAAC;UAAApB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA,GAtFD5B,KAAK;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAuFP,CAAC;EAEV,CAAC;EAED,MAAMkB,qBAAqB,GAAGA,CAAA,KAAM;IAClC,IAAIhH,WAAW,CAACiH,IAAI,KAAK,CAAC,EAAE,OAAO,IAAI;IAEvC,MAAMC,UAAU,GAAGC,KAAK,CAAC/C,IAAI,CAACpE,WAAW,CAAC,CAAC8D,IAAI,CAAC,IAAI,CAAC;IACrD,oBACExF,OAAA;MAAKgG,SAAS,EAAC,kBAAkB;MAACC,KAAK,EAAE;QACvCC,OAAO,EAAE,MAAM;QACfE,UAAU,EAAE,QAAQ;QACpBC,GAAG,EAAE,KAAK;QACVE,OAAO,EAAE,UAAU;QACnBS,KAAK,EAAE,uBAAuB;QAC9BF,QAAQ,EAAE,MAAM;QAChBY,SAAS,EAAE;MACb,CAAE;MAAAjB,QAAA,gBACAzG,OAAA;QAAKgG,SAAS,EAAC,aAAa;QAAAS,QAAA,gBAC1BzG,OAAA;UAAMgG,SAAS,EAAC;QAAK;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACxBxH,OAAA;UAAMgG,SAAS,EAAC;QAAK;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACxBxH,OAAA;UAAMgG,SAAS,EAAC;QAAK;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrB,CAAC,eACNxH,OAAA;QAAAyG,QAAA,GAAOmC,UAAU,EAAC,GAAC,EAAClH,WAAW,CAACiH,IAAI,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,EAAC,YAAU;MAAA;QAAAtB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxE,CAAC;EAEV,CAAC;;EAED;EACA,MAAMsB,kBAAkB,GAAG5I,SAAS,CAAC2E,OAAO,CAACkE,MAAM,CACjDjE,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKvC,MAAM,CAACuC,EAAE,IAAI,CAACqB,CAAC,CAACkE,YAChC,CAAC;;EAED;EACA,MAAMC,UAAU,GAAG/I,SAAS,CAAC+E,YAAY,IAAI,EAAE;;EAE/C;EACA,MAAMiE,kBAAkB,GAAGC,MAAM,CAACC,IAAI,CAAC5I,eAAe,CAAC;;EAEvD;EACA,MAAM6I,cAAc,GAAGA,CAAA,kBACrBrJ,OAAA;IAAKiG,KAAK,EAAE;MACV6B,QAAQ,EAAE,UAAU;MACpBwB,GAAG,EAAE,CAAC;MACNC,IAAI,EAAE,CAAC;MACP7C,KAAK,EAAE,MAAM;MACbF,UAAU,EAAE,qBAAqB;MACjCgD,MAAM,EAAE,IAAI;MACZjD,OAAO,EAAE,EAAE;MACXK,YAAY,EAAE,EAAE;MAChBK,SAAS,EAAE,kBAAkB;MAC7BD,KAAK,EAAE,MAAM;MACbmB,SAAS,EAAE,MAAM;MACjBN,QAAQ,EAAE,GAAG;MACbvB,MAAM,EAAE,QAAQ;MAChBQ,QAAQ,EAAE;IACZ,CAAE;IAAAL,QAAA,gBACAzG,OAAA;MAAIiG,KAAK,EAAE;QAAEgC,YAAY,EAAE;MAAG,CAAE;MAAAxB,QAAA,EAAC;IAAW;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjDxH,OAAA;MAAKiG,KAAK,EAAE;QAAEgC,YAAY,EAAE;MAAG,CAAE;MAAAxB,QAAA,eAC/BzG,OAAA;QAAQgG,SAAS,EAAC,iBAAiB;QAACC,KAAK,EAAE;UAAEgC,YAAY,EAAE,CAAC;UAAEvB,KAAK,EAAE;QAAO,CAAE;QAAC+C,OAAO,EAAEA,CAAA,KAAM;UAAEvH,eAAe,CAAC,KAAK,CAAC;UAAEf,aAAa,CAAC,IAAI,CAAC;UAAEC,oBAAoB,CAAC,IAAI,CAAC;QAAE,CAAE;QAAAqF,QAAA,EACxKtG,UAAU,KAAK,SAAS,IAAID,SAAS,CAACwJ,KAAK,KAAK,iBAAiB,GAAG,cAAc,GAAGvJ,UAAU,KAAK,UAAU,GAAG,eAAe,GAAG;MAAW;QAAAkH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eACNxH,OAAA;MAAKiG,KAAK,EAAE;QAAEgC,YAAY,EAAE;MAAG,CAAE;MAAAxB,QAAA,gBAC/BzG,OAAA;QAAKiG,KAAK,EAAE;UAAEc,UAAU,EAAE,GAAG;UAAEkB,YAAY,EAAE;QAAE,CAAE;QAAAxB,QAAA,EAAC;MAAgB;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACvEyB,UAAU,CAACU,MAAM,KAAK,CAAC,iBAAI3J,OAAA;QAAKiG,KAAK,EAAE;UAAEa,QAAQ,EAAE,EAAE;UAAEE,KAAK,EAAE;QAAO,CAAE;QAAAP,QAAA,EAAC;MAAc;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EAC5FyB,UAAU,CAAC5D,GAAG,CAACb,IAAI,iBAClBxE,OAAA;QAA0BgG,SAAS,EAAC,mBAAmB;QAACC,KAAK,EAAE;UAAEgC,YAAY,EAAE,CAAC;UAAEvB,KAAK,EAAE;QAAO,CAAE;QAAC+C,OAAO,EAAEA,CAAA,KAAM;UAAEvH,eAAe,CAAC,KAAK,CAAC;UAAEf,aAAa,CAACqD,IAAI,CAAChC,MAAM,CAAC;UAAEpB,oBAAoB,CAAC,IAAI,CAAC;QAAE,CAAE;QAAAqF,QAAA,GACnMjC,IAAI,CAACG,IAAI,EAAC,IAAE,EAACH,IAAI,CAACU,OAAO,CAACyE,MAAM,EAAC,WACpC;MAAA,GAFanF,IAAI,CAAChC,MAAM;QAAA6E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEhB,CACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNxH,OAAA;MAAAyG,QAAA,gBACEzG,OAAA;QAAKiG,KAAK,EAAE;UAAEc,UAAU,EAAE,GAAG;UAAEkB,YAAY,EAAE;QAAE,CAAE;QAAAxB,QAAA,EAAC;MAAa;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACpEsB,kBAAkB,CAACa,MAAM,KAAK,CAAC,iBAAI3J,OAAA;QAAKiG,KAAK,EAAE;UAAEa,QAAQ,EAAE,EAAE;UAAEE,KAAK,EAAE;QAAO,CAAE;QAAAP,QAAA,EAAC;MAAoB;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EAC1GsB,kBAAkB,CAACzD,GAAG,CAACP,CAAC,iBACvB9E,OAAA;QAAmBgG,SAAS,EAAC,mBAAmB;QAACC,KAAK,EAAE;UAAEgC,YAAY,EAAE,CAAC;UAAEvB,KAAK,EAAE;QAAO,CAAE;QAAC+C,OAAO,EAAEA,CAAA,KAAM;UAAEvH,eAAe,CAAC,KAAK,CAAC;UAAEd,oBAAoB,CAAC0D,CAAC,CAACrB,EAAE,CAAC;UAAEtC,aAAa,CAAC,IAAI,CAAC;QAAE,CAAE;QAAAsF,QAAA,EACrL3B,CAAC,CAACH;MAAI,GADIG,CAAC,CAACrB,EAAE;QAAA4D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAET,CACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNxH,OAAA;MAAQgG,SAAS,EAAC,gBAAgB;MAACC,KAAK,EAAE;QAAEiC,SAAS,EAAE,EAAE;QAAExB,KAAK,EAAE;MAAO,CAAE;MAAC+C,OAAO,EAAEA,CAAA,KAAMvH,eAAe,CAAC,KAAK,CAAE;MAAAuE,QAAA,EAAC;IAAK;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9H,CACN;EAED,oBACExH,OAAA;IAAKgG,SAAS,EAAC,gBAAgB;IAAC,cAAW,aAAa;IAACC,KAAK,EAAE;MAAE6B,QAAQ,EAAE;IAAW,CAAE;IAAArB,QAAA,gBAEvFzG,OAAA;MACEgG,SAAS,EAAC,mBAAmB;MAC7BC,KAAK,EAAE;QAAE6B,QAAQ,EAAE,UAAU;QAAEwB,GAAG,EAAE,CAAC;QAAEM,KAAK,EAAE,CAAC;QAAEJ,MAAM,EAAE,IAAI;QAAE1C,QAAQ,EAAE;MAAG,CAAE;MAC9E2C,OAAO,EAAEA,CAAA,KAAMvH,eAAe,CAAC2H,CAAC,IAAI,CAACA,CAAC,CAAE;MACxC,cAAW,kBAAkB;MAAApD,QAAA,EAC9B;IAED;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACRvF,YAAY,IAAIoH,cAAc,CAAC,CAAC,eACjCrJ,OAAA;MAAKgG,SAAS,EAAC,aAAa;MAAAS,QAAA,gBAC1BzG,OAAA;QAAKgG,SAAS,EAAC,YAAY;QAAAS,QAAA,EAAElC,mBAAmB,CAAC;MAAC;QAAA8C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACzDxH,OAAA;QAAKiG,KAAK,EAAE;UAAEa,QAAQ,EAAE,MAAM;UAAEE,KAAK,EAAE;QAAwB,CAAE;QAAAP,QAAA,GAC9D1B,kBAAkB,CAAC,CAAC,CAAC4E,MAAM,EAAC,WAC/B;MAAA;QAAAtC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGLlH,UAAU,iBACTN,OAAA;MAAKiG,KAAK,EAAE;QAAEa,QAAQ,EAAE,EAAE;QAAEE,KAAK,EAAE,SAAS;QAAEiB,YAAY,EAAE;MAAE,CAAE;MAAAxB,QAAA,GAAC,WACtD,EAACzB,qBAAqB,CAAC,CAAC,CAACQ,IAAI,CAAC,IAAI,CAAC;IAAA;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CACN,eAGDxH,OAAA;MAAKgG,SAAS,EAAC,eAAe;MAAC,aAAU,QAAQ;MAAAS,QAAA,GAC9C1B,kBAAkB,CAAC,CAAC,CAACM,GAAG,CAAC,CAAChD,GAAG,EAAEuD,KAAK,KAAKD,aAAa,CAACtD,GAAG,EAAEuD,KAAK,CAAC,CAAC,EACnE8C,qBAAqB,CAAC,CAAC,eACxB1I,OAAA;QAAK8J,GAAG,EAAE/H;MAAe;QAAAsF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzB,CAAC,eAGNxH,OAAA;MAAKgG,SAAS,EAAC,YAAY;MAAAS,QAAA,gBACzBzG,OAAA;QACEgG,SAAS,EAAC,OAAO;QACjB+D,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,mBAAmB;QAC/BC,KAAK,EAAE3I,OAAQ;QACf4I,QAAQ,EAAE/F,CAAC,IAAI5C,UAAU,CAAC4C,CAAC,CAACgG,MAAM,CAACF,KAAK,CAAE;QAC1CG,UAAU,EAAElG,cAAe;QAC3BmG,QAAQ,EAAE,CAACjK,OAAO,IAAI,CAACE,UAAU,IAAI,CAACC,iBAAkB;QACxD,cAAW;MAAgB;QAAA8G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CAAC,eACFxH,OAAA;QACEgG,SAAS,EAAC,KAAK;QACfyD,OAAO,EAAEzF,iBAAkB;QAC3BqG,QAAQ,EAAE,CAAC/I,OAAO,CAAC2C,IAAI,CAAC,CAAC,IAAK,CAAC7D,OAAO,IAAI,CAACE,UAAU,IAAI,CAACC,iBAAmB;QAC7E,cAAW,cAAc;QAAAkG,QAAA,EAC1B;MAED;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACnG,EAAA,CAnbQpB,UAAU;AAAAqK,EAAA,GAAVrK,UAAU;AAqbnB,eAAeA,UAAU;AAAC,IAAAqK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}