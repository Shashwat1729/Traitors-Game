{"ast":null,"code":"var _jsxFileName = \"D:\\\\Traitors\\\\client\\\\src\\\\components\\\\ChatSystem.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatSystem({\n  gameState,\n  playerRole,\n  canChat,\n  chatRoom,\n  activeRoom,\n  activePrivateChat,\n  privateMessages,\n  availableRooms,\n  newRoomName,\n  setNewRoomName,\n  onSendMessage,\n  onSendRoomMessage,\n  onSendPrivateMessage,\n  onCreateRoom,\n  onJoinRoom,\n  onStartPrivateChat,\n  socket\n}) {\n  _s();\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingUsers, setTypingUsers] = useState(new Set());\n  const [localChatRoomMessages, setLocalChatRoomMessages] = useState({});\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n  const [showChatMenu, setShowChatMenu] = useState(false);\n\n  // Merge gameState.chatRoomMessages into local state on update\n  useEffect(() => {\n    setLocalChatRoomMessages(gameState.chatRoomMessages || {});\n  }, [gameState.chatRoomMessages]);\n\n  // Listen for new room messages and update local state\n  useEffect(() => {\n    const handleRoomMessage = msg => {\n      setLocalChatRoomMessages(prev => {\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\n        arr.push(msg);\n        return {\n          ...prev,\n          [msg.roomId]: arr\n        };\n      });\n    };\n    socket.on('roomMessage', handleRoomMessage);\n    return () => socket.off('roomMessage', handleRoomMessage);\n  }, [socket]);\n\n  // Listen for main chat messages (traitor/faithful main chat)\n  useEffect(() => {\n    const handleMessage = msg => {\n      setLocalChatRoomMessages(prev => {\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\n        arr.push(msg);\n        return {\n          ...prev,\n          [msg.roomId]: arr\n        };\n      });\n    };\n    socket.on('message', handleMessage);\n    return () => socket.off('message', handleMessage);\n  }, [socket]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [gameState.chatRoomMessages, privateMessages]);\n\n  // Typing indicator logic\n  useEffect(() => {\n    if (message && !isTyping) {\n      setIsTyping(true);\n      socket.emit('typing', {\n        isTyping: true,\n        roomId: activeRoom || chatRoom\n      });\n    } else if (!message && isTyping) {\n      setIsTyping(false);\n      socket.emit('typing', {\n        isTyping: false,\n        roomId: activeRoom || chatRoom\n      });\n    }\n\n    // Clear typing indicator after 3 seconds of no typing\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    if (message) {\n      typingTimeoutRef.current = setTimeout(() => {\n        setIsTyping(false);\n        socket.emit('typing', {\n          isTyping: false,\n          roomId: activeRoom || chatRoom\n        });\n      }, 3000);\n    }\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, [message, isTyping, socket, activeRoom, chatRoom]);\n\n  // Listen for typing events\n  useEffect(() => {\n    const handleTyping = ({\n      playerId,\n      playerName,\n      isTyping: userTyping\n    }) => {\n      if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) return;\n      setTypingUsers(prev => {\n        const newSet = new Set(prev);\n        if (userTyping) {\n          newSet.add(playerName);\n        } else {\n          newSet.delete(playerName);\n        }\n        return newSet;\n      });\n    };\n    socket.on('userTyping', handleTyping);\n    return () => socket.off('userTyping', handleTyping);\n  }, [socket]);\n  useEffect(() => {\n    // Listen for chatRoomInvited event\n    const handleChatRoomInvited = ({\n      roomId,\n      roomName\n    }) => {\n      alert(`You have been invited to join room: ${roomName}`);\n      onJoinRoom(roomId);\n    };\n    socket.on('chatRoomInvited', handleChatRoomInvited);\n    return () => socket.off('chatRoomInvited', handleChatRoomInvited);\n  }, [socket, onJoinRoom]);\n  const handleSendMessage = () => {\n    if (!message.trim()) return;\n    if (activeRoom) {\n      onSendRoomMessage();\n      setMessage('');\n    } else if (activePrivateChat) {\n      onSendPrivateMessage();\n      setMessage('');\n    } else if (canChat) {\n      onSendMessage(chatRoom, message);\n      setMessage('');\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const getCurrentChatTitle = () => {\n    if (activeRoom) {\n      const room = availableRooms.find(r => r.roomId === activeRoom);\n      return `Room: ${(room === null || room === void 0 ? void 0 : room.name) || 'Unknown'}`;\n    }\n    if (activePrivateChat) {\n      const player = gameState.players.find(p => p.id === activePrivateChat);\n      return `Private: ${(player === null || player === void 0 ? void 0 : player.name) || 'Unknown'}`;\n    }\n    if (canChat) {\n      return 'Group Discussion';\n    }\n    return 'Chat';\n  };\n  const getCurrentMessages = () => {\n    if (activeRoom) {\n      if (localChatRoomMessages && localChatRoomMessages[activeRoom]) {\n        return localChatRoomMessages[activeRoom];\n      }\n      if (gameState.chatRoomMessages && gameState.chatRoomMessages[activeRoom]) {\n        return gameState.chatRoomMessages[activeRoom];\n      }\n      return [];\n    }\n    if (activePrivateChat) {\n      return privateMessages[activePrivateChat] || [];\n    }\n    // Main chat (traitor/faithful)\n    if (localChatRoomMessages && localChatRoomMessages[chatRoom]) {\n      return localChatRoomMessages[chatRoom];\n    }\n    if (gameState.chatRoomMessages && gameState.chatRoomMessages[chatRoom]) {\n      return gameState.chatRoomMessages[chatRoom];\n    }\n    return [];\n  };\n  const getCurrentRoomMembers = () => {\n    if (activeRoom && gameState.allChatRooms) {\n      const room = gameState.allChatRooms.find(r => r.roomId === activeRoom);\n      return room ? room.members : [];\n    }\n    return [];\n  };\n  const getInitials = name => {\n    return name.split(' ').map(word => word.charAt(0)).join('').toUpperCase().slice(0, 2);\n  };\n  const renderMessage = (msg, index) => {\n    const isOwnMessage = msg.playerId === (socket === null || socket === void 0 ? void 0 : socket.id) || msg.from === (socket === null || socket === void 0 ? void 0 : socket.id);\n    const isSystem = !msg.playerId && !msg.from;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `chat-message ${isOwnMessage ? 'own-message' : 'other-message'}`,\n      \"aria-label\": isSystem ? 'System message' : `${msg.playerName} says: ${msg.message}`,\n      style: {\n        marginLeft: isOwnMessage ? 'auto' : '0',\n        marginRight: isOwnMessage ? '0' : 'auto',\n        maxWidth: '80%',\n        display: 'flex',\n        flexDirection: isOwnMessage ? 'row-reverse' : 'row',\n        alignItems: 'flex-end',\n        gap: '8px',\n        marginTop: 8,\n        marginBottom: 8\n      },\n      children: [!isSystem && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-avatar\",\n        style: {\n          width: 32,\n          height: 32,\n          borderRadius: '50%',\n          background: isOwnMessage ? 'linear-gradient(45deg, #ff6b6b, #ee5a24)' : 'linear-gradient(45deg, #4ecdc4, #44a08d)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: 12,\n          fontWeight: 'bold',\n          color: 'white',\n          flexShrink: 0,\n          boxShadow: isOwnMessage ? '0 2px 8px #ff6b6b55' : '0 2px 8px #4ecdc455'\n        },\n        \"aria-label\": `${msg.playerName}'s avatar`,\n        children: getInitials(msg.playerName)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: isSystem ? 'linear-gradient(90deg, #333 60%, #444 100%)' : isOwnMessage ? 'linear-gradient(90deg, #ff6b6b 60%, #ee5a24 100%)' : 'linear-gradient(90deg, #222 60%, #4ecdc4 100%)',\n          color: isSystem ? '#ffd700' : isOwnMessage ? '#fff' : '#fff',\n          borderLeft: isOwnMessage ? '4px solid #ff6b6b' : isSystem ? '4px solid #ffd700' : '4px solid #4ecdc4',\n          boxShadow: isOwnMessage ? '0 2px 8px #ff6b6b55' : isSystem ? '0 2px 8px #ffd70055' : '0 2px 8px #4ecdc455',\n          animation: 'message-pop-in 0.4s cubic-bezier(.4,2,.6,1)',\n          fontWeight: isSystem ? 700 : 400,\n          fontStyle: isSystem ? 'italic' : 'normal',\n          borderRadius: 14,\n          padding: '14px 18px',\n          fontSize: 16,\n          letterSpacing: 0.2,\n          transition: 'background 0.3s, box-shadow 0.3s',\n          position: 'relative',\n          overflow: 'hidden'\n        },\n        children: [!isSystem && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-name\",\n          style: {\n            color: isOwnMessage ? '#fff' : '#4ecdc4',\n            fontWeight: 700,\n            marginBottom: 2\n          },\n          children: msg.playerName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-text\",\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '10px',\n            color: 'rgba(255,255,255,0.5)',\n            marginTop: '4px',\n            textAlign: isOwnMessage ? 'right' : 'left'\n          },\n          children: new Date(msg.timestamp).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this);\n  };\n  const renderTypingIndicator = () => {\n    if (typingUsers.size === 0) return null;\n    const typingList = Array.from(typingUsers).join(', ');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"typing-indicator\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        padding: '8px 16px',\n        color: 'rgba(255,255,255,0.7)',\n        fontSize: '14px',\n        fontStyle: 'italic'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-dots\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [typingList, \" \", typingUsers.size === 1 ? 'is' : 'are', \" typing...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Helper: List of possible private chat targets (alive players except self)\n  const privateChatTargets = gameState.players.filter(p => p.id !== socket.id && !p.isEliminated);\n\n  // Helper: List of available group chat rooms\n  const groupRooms = gameState.allChatRooms || [];\n\n  // Helper: List of active private chats (by id)\n  const activePrivateChats = Object.keys(privateMessages);\n\n  // UI: Chat mode switcher\n  const renderChatMenu = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      background: 'rgba(20,30,40,0.98)',\n      zIndex: 3000,\n      padding: 24,\n      borderRadius: 12,\n      boxShadow: '0 2px 16px #0008',\n      color: '#fff',\n      textAlign: 'left',\n      maxWidth: 420,\n      margin: '0 auto',\n      fontSize: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: 12\n      },\n      children: \"Switch Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        style: {\n          marginBottom: 8,\n          width: '100%'\n        },\n        onClick: () => {\n          setShowChatMenu(false);\n          setActiveRoom(null);\n          setActivePrivateChat(null);\n        },\n        children: playerRole === 'traitor' && gameState.phase === 'traitor_meeting' ? 'Traitor Chat' : playerRole === 'faithful' ? 'Faithful Chat' : 'Main Chat'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          marginBottom: 4\n        },\n        children: \"Group Chat Rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), groupRooms.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 13,\n          color: '#aaa'\n        },\n        children: \"No group rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 37\n      }, this), groupRooms.map(room => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        style: {\n          marginBottom: 6,\n          width: '100%'\n        },\n        onClick: () => {\n          setShowChatMenu(false);\n          setActiveRoom(room.roomId);\n          setActivePrivateChat(null);\n        },\n        children: [room.name, \" (\", room.members.length, \" members)\"]\n      }, room.roomId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          marginBottom: 4\n        },\n        children: \"Private Chats\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this), privateChatTargets.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 13,\n          color: '#aaa'\n        },\n        children: \"No available players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 45\n      }, this), privateChatTargets.map(p => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        style: {\n          marginBottom: 6,\n          width: '100%'\n        },\n        onClick: () => {\n          setShowChatMenu(false);\n          setActivePrivateChat(p.id);\n          setActiveRoom(null);\n        },\n        children: p.name\n      }, p.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-danger\",\n      style: {\n        marginTop: 18,\n        width: '100%'\n      },\n      onClick: () => setShowChatMenu(false),\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 333,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    \"aria-label\": \"Chat system\",\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-secondary\",\n      style: {\n        position: 'absolute',\n        top: 8,\n        right: 8,\n        zIndex: 3100,\n        fontSize: 13\n      },\n      onClick: () => setShowChatMenu(v => !v),\n      \"aria-label\": \"Switch chat mode\",\n      children: \"Switch Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), showChatMenu && renderChatMenu(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-title\",\n        children: getCurrentChatTitle()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '12px',\n          color: 'rgba(255,255,255,0.6)'\n        },\n        children: [getCurrentMessages().length, \" messages\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), activeRoom && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#4ecdc4',\n        marginBottom: 8\n      },\n      children: [\"Members: \", getCurrentRoomMembers().join(', ')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      \"aria-live\": \"polite\",\n      children: [getCurrentMessages().map((msg, index) => renderMessage(msg, index)), renderTypingIndicator(), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        type: \"text\",\n        placeholder: \"Type a message...\",\n        value: message,\n        onChange: e => setMessage(e.target.value),\n        onKeyPress: handleKeyPress,\n        disabled: !canChat && !activeRoom && !activePrivateChat,\n        \"aria-label\": \"Type a message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: handleSendMessage,\n        disabled: !message.trim() || !canChat && !activeRoom && !activePrivateChat,\n        \"aria-label\": \"Send message\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 378,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatSystem, \"1yEu1pn7s2ihjEzxxUVfbbydYyw=\");\n_c = ChatSystem;\nexport default ChatSystem;\nvar _c;\n$RefreshReg$(_c, \"ChatSystem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatSystem","gameState","playerRole","canChat","chatRoom","activeRoom","activePrivateChat","privateMessages","availableRooms","newRoomName","setNewRoomName","onSendMessage","onSendRoomMessage","onSendPrivateMessage","onCreateRoom","onJoinRoom","onStartPrivateChat","socket","_s","message","setMessage","isTyping","setIsTyping","typingUsers","setTypingUsers","Set","localChatRoomMessages","setLocalChatRoomMessages","messagesEndRef","typingTimeoutRef","showChatMenu","setShowChatMenu","chatRoomMessages","handleRoomMessage","msg","prev","arr","roomId","push","on","off","handleMessage","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","emit","clearTimeout","setTimeout","handleTyping","playerId","playerName","userTyping","id","newSet","add","delete","handleChatRoomInvited","roomName","alert","handleSendMessage","trim","handleKeyPress","e","key","shiftKey","preventDefault","getCurrentChatTitle","room","find","r","name","player","players","p","getCurrentMessages","getCurrentRoomMembers","allChatRooms","members","getInitials","split","map","word","charAt","join","toUpperCase","slice","renderMessage","index","isOwnMessage","from","isSystem","className","style","marginLeft","marginRight","maxWidth","display","flexDirection","alignItems","gap","marginTop","marginBottom","children","width","height","borderRadius","background","justifyContent","fontSize","fontWeight","color","flexShrink","boxShadow","fileName","_jsxFileName","lineNumber","columnNumber","borderLeft","animation","fontStyle","padding","letterSpacing","transition","position","overflow","textAlign","Date","timestamp","toLocaleTimeString","renderTypingIndicator","size","typingList","Array","privateChatTargets","filter","isEliminated","groupRooms","activePrivateChats","Object","keys","renderChatMenu","top","left","zIndex","margin","onClick","setActiveRoom","setActivePrivateChat","phase","length","right","v","ref","type","placeholder","value","onChange","target","onKeyPress","disabled","_c","$RefreshReg$"],"sources":["D:/Traitors/client/src/components/ChatSystem.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nfunction ChatSystem({ \r\n  gameState, \r\n  playerRole, \r\n  canChat, \r\n  chatRoom, \r\n  activeRoom, \r\n  activePrivateChat, \r\n  privateMessages, \r\n  availableRooms,\r\n  newRoomName,\r\n  setNewRoomName,\r\n  onSendMessage,\r\n  onSendRoomMessage,\r\n  onSendPrivateMessage,\r\n  onCreateRoom,\r\n  onJoinRoom,\r\n  onStartPrivateChat,\r\n  socket\r\n}) {\r\n  const [message, setMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [typingUsers, setTypingUsers] = useState(new Set());\r\n  const [localChatRoomMessages, setLocalChatRoomMessages] = useState({});\r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n  const [showChatMenu, setShowChatMenu] = useState(false);\r\n\r\n  // Merge gameState.chatRoomMessages into local state on update\r\n  useEffect(() => {\r\n    setLocalChatRoomMessages(gameState.chatRoomMessages || {});\r\n  }, [gameState.chatRoomMessages]);\r\n\r\n  // Listen for new room messages and update local state\r\n  useEffect(() => {\r\n    const handleRoomMessage = (msg) => {\r\n      setLocalChatRoomMessages(prev => {\r\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\r\n        arr.push(msg);\r\n        return { ...prev, [msg.roomId]: arr };\r\n      });\r\n    };\r\n    socket.on('roomMessage', handleRoomMessage);\r\n    return () => socket.off('roomMessage', handleRoomMessage);\r\n  }, [socket]);\r\n\r\n  // Listen for main chat messages (traitor/faithful main chat)\r\n  useEffect(() => {\r\n    const handleMessage = (msg) => {\r\n      setLocalChatRoomMessages(prev => {\r\n        const arr = prev[msg.roomId] ? [...prev[msg.roomId]] : [];\r\n        arr.push(msg);\r\n        return { ...prev, [msg.roomId]: arr };\r\n      });\r\n    };\r\n    socket.on('message', handleMessage);\r\n    return () => socket.off('message', handleMessage);\r\n  }, [socket]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [gameState.chatRoomMessages, privateMessages]);\r\n\r\n  // Typing indicator logic\r\n  useEffect(() => {\r\n    if (message && !isTyping) {\r\n      setIsTyping(true);\r\n      socket.emit('typing', { isTyping: true, roomId: activeRoom || chatRoom });\r\n    } else if (!message && isTyping) {\r\n      setIsTyping(false);\r\n      socket.emit('typing', { isTyping: false, roomId: activeRoom || chatRoom });\r\n    }\r\n\r\n    // Clear typing indicator after 3 seconds of no typing\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n    if (message) {\r\n      typingTimeoutRef.current = setTimeout(() => {\r\n        setIsTyping(false);\r\n        socket.emit('typing', { isTyping: false, roomId: activeRoom || chatRoom });\r\n      }, 3000);\r\n    }\r\n\r\n    return () => {\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [message, isTyping, socket, activeRoom, chatRoom]);\r\n\r\n  // Listen for typing events\r\n  useEffect(() => {\r\n    const handleTyping = ({ playerId, playerName, isTyping: userTyping }) => {\r\n      if (playerId === socket?.id) return;\r\n      \r\n      setTypingUsers(prev => {\r\n        const newSet = new Set(prev);\r\n        if (userTyping) {\r\n          newSet.add(playerName);\r\n        } else {\r\n          newSet.delete(playerName);\r\n        }\r\n        return newSet;\r\n      });\r\n    };\r\n\r\n    socket.on('userTyping', handleTyping);\r\n    return () => socket.off('userTyping', handleTyping);\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    // Listen for chatRoomInvited event\r\n    const handleChatRoomInvited = ({ roomId, roomName }) => {\r\n      alert(`You have been invited to join room: ${roomName}`);\r\n      onJoinRoom(roomId);\r\n    };\r\n    socket.on('chatRoomInvited', handleChatRoomInvited);\r\n    return () => socket.off('chatRoomInvited', handleChatRoomInvited);\r\n  }, [socket, onJoinRoom]);\r\n\r\n  const handleSendMessage = () => {\r\n    if (!message.trim()) return;\r\n    if (activeRoom) {\r\n      onSendRoomMessage();\r\n      setMessage('');\r\n    } else if (activePrivateChat) {\r\n      onSendPrivateMessage();\r\n      setMessage('');\r\n    } else if (canChat) {\r\n      onSendMessage(chatRoom, message);\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const getCurrentChatTitle = () => {\r\n    if (activeRoom) {\r\n      const room = availableRooms.find(r => r.roomId === activeRoom);\r\n      return `Room: ${room?.name || 'Unknown'}`;\r\n    }\r\n    if (activePrivateChat) {\r\n      const player = gameState.players.find(p => p.id === activePrivateChat);\r\n      return `Private: ${player?.name || 'Unknown'}`;\r\n    }\r\n    if (canChat) {\r\n      return 'Group Discussion';\r\n    }\r\n    return 'Chat';\r\n  };\r\n\r\n  const getCurrentMessages = () => {\r\n    if (activeRoom) {\r\n      if (localChatRoomMessages && localChatRoomMessages[activeRoom]) {\r\n        return localChatRoomMessages[activeRoom];\r\n      }\r\n      if (gameState.chatRoomMessages && gameState.chatRoomMessages[activeRoom]) {\r\n        return gameState.chatRoomMessages[activeRoom];\r\n      }\r\n      return [];\r\n    }\r\n    if (activePrivateChat) {\r\n      return privateMessages[activePrivateChat] || [];\r\n    }\r\n    // Main chat (traitor/faithful)\r\n    if (localChatRoomMessages && localChatRoomMessages[chatRoom]) {\r\n      return localChatRoomMessages[chatRoom];\r\n    }\r\n    if (gameState.chatRoomMessages && gameState.chatRoomMessages[chatRoom]) {\r\n      return gameState.chatRoomMessages[chatRoom];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getCurrentRoomMembers = () => {\r\n    if (activeRoom && gameState.allChatRooms) {\r\n      const room = gameState.allChatRooms.find(r => r.roomId === activeRoom);\r\n      return room ? room.members : [];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getInitials = (name) => {\r\n    return name\r\n      .split(' ')\r\n      .map(word => word.charAt(0))\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const renderMessage = (msg, index) => {\r\n    const isOwnMessage = msg.playerId === socket?.id || msg.from === socket?.id;\r\n    const isSystem = !msg.playerId && !msg.from;\r\n    \r\n    return (\r\n      <div \r\n        key={index} \r\n        className={`chat-message ${isOwnMessage ? 'own-message' : 'other-message'}`}\r\n        aria-label={isSystem ? 'System message' : `${msg.playerName} says: ${msg.message}`}\r\n        style={{\r\n          marginLeft: isOwnMessage ? 'auto' : '0',\r\n          marginRight: isOwnMessage ? '0' : 'auto',\r\n          maxWidth: '80%',\r\n          display: 'flex',\r\n          flexDirection: isOwnMessage ? 'row-reverse' : 'row',\r\n          alignItems: 'flex-end',\r\n          gap: '8px',\r\n          marginTop: 8,\r\n          marginBottom: 8,\r\n        }}\r\n      >\r\n        {/* Avatar/Initials */}\r\n        {!isSystem && (\r\n          <div\r\n            className=\"message-avatar\"\r\n            style={{\r\n              width: 32,\r\n              height: 32,\r\n              borderRadius: '50%',\r\n              background: isOwnMessage\r\n                ? 'linear-gradient(45deg, #ff6b6b, #ee5a24)'\r\n                : 'linear-gradient(45deg, #4ecdc4, #44a08d)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: 12,\r\n              fontWeight: 'bold',\r\n              color: 'white',\r\n              flexShrink: 0,\r\n              boxShadow: isOwnMessage\r\n                ? '0 2px 8px #ff6b6b55'\r\n                : '0 2px 8px #4ecdc455',\r\n            }}\r\n            aria-label={`${msg.playerName}'s avatar`}\r\n          >\r\n            {getInitials(msg.playerName)}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Message Bubble */}\r\n        <div\r\n          style={{\r\n            background: isSystem\r\n              ? 'linear-gradient(90deg, #333 60%, #444 100%)'\r\n              : isOwnMessage\r\n              ? 'linear-gradient(90deg, #ff6b6b 60%, #ee5a24 100%)'\r\n              : 'linear-gradient(90deg, #222 60%, #4ecdc4 100%)',\r\n            color: isSystem ? '#ffd700' : isOwnMessage ? '#fff' : '#fff',\r\n            borderLeft: isOwnMessage ? '4px solid #ff6b6b' : isSystem ? '4px solid #ffd700' : '4px solid #4ecdc4',\r\n            boxShadow: isOwnMessage ? '0 2px 8px #ff6b6b55' : isSystem ? '0 2px 8px #ffd70055' : '0 2px 8px #4ecdc455',\r\n            animation: 'message-pop-in 0.4s cubic-bezier(.4,2,.6,1)',\r\n            fontWeight: isSystem ? 700 : 400,\r\n            fontStyle: isSystem ? 'italic' : 'normal',\r\n            borderRadius: 14,\r\n            padding: '14px 18px',\r\n            fontSize: 16,\r\n            letterSpacing: 0.2,\r\n            transition: 'background 0.3s, box-shadow 0.3s',\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n          }}\r\n        >\r\n          {!isSystem && (\r\n            <div className=\"player-name\" style={{ color: isOwnMessage ? '#fff' : '#4ecdc4', fontWeight: 700, marginBottom: 2 }}>\r\n              {msg.playerName}\r\n            </div>\r\n          )}\r\n          <div className=\"message-text\">\r\n            {msg.message}\r\n          </div>\r\n          <div style={{ \r\n            fontSize: '10px', \r\n            color: 'rgba(255,255,255,0.5)', \r\n            marginTop: '4px',\r\n            textAlign: isOwnMessage ? 'right' : 'left'\r\n          }}>\r\n            {new Date(msg.timestamp).toLocaleTimeString()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderTypingIndicator = () => {\r\n    if (typingUsers.size === 0) return null;\r\n    \r\n    const typingList = Array.from(typingUsers).join(', ');\r\n    return (\r\n      <div className=\"typing-indicator\" style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        padding: '8px 16px',\r\n        color: 'rgba(255,255,255,0.7)',\r\n        fontSize: '14px',\r\n        fontStyle: 'italic',\r\n      }}>\r\n        <div className=\"typing-dots\">\r\n          <span className=\"dot\" />\r\n          <span className=\"dot\" />\r\n          <span className=\"dot\" />\r\n        </div>\r\n        <span>{typingList} {typingUsers.size === 1 ? 'is' : 'are'} typing...</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Helper: List of possible private chat targets (alive players except self)\r\n  const privateChatTargets = gameState.players.filter(\r\n    p => p.id !== socket.id && !p.isEliminated\r\n  );\r\n\r\n  // Helper: List of available group chat rooms\r\n  const groupRooms = gameState.allChatRooms || [];\r\n\r\n  // Helper: List of active private chats (by id)\r\n  const activePrivateChats = Object.keys(privateMessages);\r\n\r\n  // UI: Chat mode switcher\r\n  const renderChatMenu = () => (\r\n    <div style={{\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      background: 'rgba(20,30,40,0.98)',\r\n      zIndex: 3000,\r\n      padding: 24,\r\n      borderRadius: 12,\r\n      boxShadow: '0 2px 16px #0008',\r\n      color: '#fff',\r\n      textAlign: 'left',\r\n      maxWidth: 420,\r\n      margin: '0 auto',\r\n      fontSize: 16\r\n    }}>\r\n      <h3 style={{ marginBottom: 12 }}>Switch Chat</h3>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <button className=\"btn btn-primary\" style={{ marginBottom: 8, width: '100%' }} onClick={() => { setShowChatMenu(false); setActiveRoom(null); setActivePrivateChat(null); }}>\r\n          {playerRole === 'traitor' && gameState.phase === 'traitor_meeting' ? 'Traitor Chat' : playerRole === 'faithful' ? 'Faithful Chat' : 'Main Chat'}\r\n        </button>\r\n      </div>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <div style={{ fontWeight: 700, marginBottom: 4 }}>Group Chat Rooms</div>\r\n        {groupRooms.length === 0 && <div style={{ fontSize: 13, color: '#aaa' }}>No group rooms</div>}\r\n        {groupRooms.map(room => (\r\n          <button key={room.roomId} className=\"btn btn-secondary\" style={{ marginBottom: 6, width: '100%' }} onClick={() => { setShowChatMenu(false); setActiveRoom(room.roomId); setActivePrivateChat(null); }}>\r\n            {room.name} ({room.members.length} members)\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <div>\r\n        <div style={{ fontWeight: 700, marginBottom: 4 }}>Private Chats</div>\r\n        {privateChatTargets.length === 0 && <div style={{ fontSize: 13, color: '#aaa' }}>No available players</div>}\r\n        {privateChatTargets.map(p => (\r\n          <button key={p.id} className=\"btn btn-secondary\" style={{ marginBottom: 6, width: '100%' }} onClick={() => { setShowChatMenu(false); setActivePrivateChat(p.id); setActiveRoom(null); }}>\r\n            {p.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <button className=\"btn btn-danger\" style={{ marginTop: 18, width: '100%' }} onClick={() => setShowChatMenu(false)}>Close</button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"chat-container\" aria-label=\"Chat system\" style={{ position: 'relative' }}>\r\n      {/* Chat Mode Switcher Button */}\r\n      <button\r\n        className=\"btn btn-secondary\"\r\n        style={{ position: 'absolute', top: 8, right: 8, zIndex: 3100, fontSize: 13 }}\r\n        onClick={() => setShowChatMenu(v => !v)}\r\n        aria-label=\"Switch chat mode\"\r\n      >\r\n        Switch Chat\r\n      </button>\r\n      {showChatMenu && renderChatMenu()}\r\n      <div className=\"chat-header\">\r\n        <div className=\"chat-title\">{getCurrentChatTitle()}</div>\r\n        <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.6)' }}>\r\n          {getCurrentMessages().length} messages\r\n        </div>\r\n      </div>\r\n\r\n      {/* Show room members if in a group chat */}\r\n      {activeRoom && (\r\n        <div style={{ fontSize: 12, color: '#4ecdc4', marginBottom: 8 }}>\r\n          Members: {getCurrentRoomMembers().join(', ')}\r\n        </div>\r\n      )}\r\n\r\n      {/* Messages */}\r\n      <div className=\"chat-messages\" aria-live=\"polite\">\r\n        {getCurrentMessages().map((msg, index) => renderMessage(msg, index))}\r\n        {renderTypingIndicator()}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div className=\"chat-input\">\r\n        <input\r\n          className=\"input\"\r\n          type=\"text\"\r\n          placeholder=\"Type a message...\"\r\n          value={message}\r\n          onChange={e => setMessage(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          disabled={!canChat && !activeRoom && !activePrivateChat}\r\n          aria-label=\"Type a message\"\r\n        />\r\n        <button\r\n          className=\"btn\"\r\n          onClick={handleSendMessage}\r\n          disabled={!message.trim() || (!canChat && !activeRoom && !activePrivateChat)}\r\n          aria-label=\"Send message\"\r\n        >\r\n          Send\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatSystem; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}