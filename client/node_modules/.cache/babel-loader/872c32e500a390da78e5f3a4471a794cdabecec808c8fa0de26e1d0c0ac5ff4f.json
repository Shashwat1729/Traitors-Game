{"ast":null,"code":"import React,{useState,useEffect}from'react';import io from'socket.io-client';import Lobby from'./components/Lobby';import GameRoom from'./components/GameRoom';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('http://localhost:3001');function App(){const[gameState,setGameState]=useState(null);const[playerRole,setPlayerRole]=useState(null);const[gameId,setGameId]=useState(null);const[playerName,setPlayerName]=useState('');const[error,setError]=useState(null);useEffect(()=>{// Socket event listeners\nsocket.on('gameCreated',_ref=>{let{gameId,gameState}=_ref;setGameId(gameId);setGameState(gameState);});socket.on('gameState',newGameState=>{setGameState(newGameState);if(newGameState.phase==='lobby')setPlayerRole(null);});socket.on('roleAssignment',_ref2=>{let{role,gameState}=_ref2;setPlayerRole(role);setGameState(gameState);});socket.on('error',_ref3=>{let{message}=_ref3;setError(message);setTimeout(()=>setError(null),5000);});return()=>{socket.off('gameCreated');socket.off('gameState');socket.off('roleAssignment');socket.off('error');};},[]);const createGame=(playerName,playerCount)=>{socket.emit('createGame',{playerName,playerCount});};const joinGame=(gameId,playerName)=>{socket.emit('joinGame',{gameId,playerName});setGameId(gameId);setPlayerName(playerName);};const startGame=()=>{socket.emit('startGame');};const vote=targetPlayerId=>{socket.emit('vote',{targetPlayerId});};const sendMessage=(roomId,message)=>{socket.emit('sendMessage',{roomId,message});};const respondToRecruitment=accept=>{socket.emit('recruitmentResponse',{accept});};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>window.location.reload(),children:\"Reload Page\"})]})});}if(gameState&&gameState.phase!=='lobby'){return/*#__PURE__*/_jsx(GameRoom,{gameState:gameState,playerRole:playerRole,playerName:playerName,onVote:vote,onSendMessage:sendMessage,onRecruitmentResponse:respondToRecruitment,socket:socket});}return/*#__PURE__*/_jsx(Lobby,{gameState:gameState,onCreateGame:createGame,onJoinGame:joinGame,onStartGame:startGame});}export default App;","map":{"version":3,"names":["React","useState","useEffect","io","Lobby","GameRoom","jsx","_jsx","jsxs","_jsxs","socket","App","gameState","setGameState","playerRole","setPlayerRole","gameId","setGameId","playerName","setPlayerName","error","setError","on","_ref","newGameState","phase","_ref2","role","_ref3","message","setTimeout","off","createGame","playerCount","emit","joinGame","startGame","vote","targetPlayerId","sendMessage","roomId","respondToRecruitment","accept","className","children","onClick","window","location","reload","onVote","onSendMessage","onRecruitmentResponse","onCreateGame","onJoinGame","onStartGame"],"sources":["D:/Traitors/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\nimport Lobby from './components/Lobby';\r\nimport GameRoom from './components/GameRoom';\r\nimport './App.css';\r\n\r\nconst socket = io('http://localhost:3001');\r\n\r\nfunction App() {\r\n  const [gameState, setGameState] = useState(null);\r\n  const [playerRole, setPlayerRole] = useState(null);\r\n  const [gameId, setGameId] = useState(null);\r\n  const [playerName, setPlayerName] = useState('');\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Socket event listeners\r\n    socket.on('gameCreated', ({ gameId, gameState }) => {\r\n      setGameId(gameId);\r\n      setGameState(gameState);\r\n    });\r\n\r\n    socket.on('gameState', (newGameState) => {\r\n      setGameState(newGameState);\r\n      if (newGameState.phase === 'lobby') setPlayerRole(null);\r\n    });\r\n\r\n    socket.on('roleAssignment', ({ role, gameState }) => {\r\n      setPlayerRole(role);\r\n      setGameState(gameState);\r\n    });\r\n\r\n    socket.on('error', ({ message }) => {\r\n      setError(message);\r\n      setTimeout(() => setError(null), 5000);\r\n    });\r\n\r\n    return () => {\r\n      socket.off('gameCreated');\r\n      socket.off('gameState');\r\n      socket.off('roleAssignment');\r\n      socket.off('error');\r\n    };\r\n  }, []);\r\n\r\n  const createGame = (playerName, playerCount) => {\r\n    socket.emit('createGame', { playerName, playerCount });\r\n  };\r\n\r\n  const joinGame = (gameId, playerName) => {\r\n    socket.emit('joinGame', { gameId, playerName });\r\n    setGameId(gameId);\r\n    setPlayerName(playerName);\r\n  };\r\n\r\n  const startGame = () => {\r\n    socket.emit('startGame');\r\n  };\r\n\r\n  const vote = (targetPlayerId) => {\r\n    socket.emit('vote', { targetPlayerId });\r\n  };\r\n\r\n  const sendMessage = (roomId, message) => {\r\n    socket.emit('sendMessage', { roomId, message });\r\n  };\r\n\r\n  const respondToRecruitment = (accept) => {\r\n    socket.emit('recruitmentResponse', { accept });\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"card\">\r\n          <h2>Error</h2>\r\n          <p>{error}</p>\r\n          <button className=\"btn\" onClick={() => window.location.reload()}>\r\n            Reload Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (gameState && gameState.phase !== 'lobby') {\r\n    return (\r\n      <GameRoom\r\n        gameState={gameState}\r\n        playerRole={playerRole}\r\n        playerName={playerName}\r\n        onVote={vote}\r\n        onSendMessage={sendMessage}\r\n        onRecruitmentResponse={respondToRecruitment}\r\n        socket={socket}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Lobby\r\n      gameState={gameState}\r\n      onCreateGame={createGame}\r\n      onJoinGame={joinGame}\r\n      onStartGame={startGame}\r\n    />\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}